"use strict";function GetCharLength(e){for(var t=0,c=0;c<e.length;c++)e.charCodeAt(c)>255?t+=2:t+=1;return t}function check_register(e){var t=$.trim($("#mobilePhone").val()),c=$.trim($("#userName").val()),o=$.trim($("#companyName").val()),n=$.trim($("#contact").val()),a=$.trim($("#telphone1").val()),l=$.trim($("#telphone2").val());$.trim($("#address4").val());return""==c||""==t||""==o||""==n||""==a||""==l?(""==t&&(checkReg.tool.switchInputStyle("error","mobilePhone","tipImgMobile","tipInfoMobilePhone"),$("#tipInfoMobilePhone").html(checkReg.lang_zh[3202])),""==c&&(checkReg.tool.switchInputStyle("error","userName","tipImgUserName","tipInfoUserName"),$("#tipInfoUserName").html(checkReg.lang_zh[3102])),""==o&&(checkReg.tool.switchInputStyle("error","companyName","tipImgCompanyName","tipInfoCompanyName"),$("#tipInfoCompanyName").html(checkReg.lang_zh[3132])),""!=a&&""!=l||(checkReg.tool.switchInputStyle("error","telphone1","tipImgTelphone","tipInfoTelphone"),$("#tipInfoTelphone").html(checkReg.lang_zh[3162])),""==a&&(checkReg.tool.switchInputStyle("error","telphone2","tipImgTelphone","tipInfoTelphone"),$("#tipInfoTelphone").html(checkReg.lang_zh[3162])),""==n&&(checkReg.tool.switchInputStyle("error","contact","tipImgContact","tipInfoContact"),$("#tipInfoContact").html(checkReg.lang_zh[3192])),submitBtnAvailability("enable"),e.preventDefault(),!1):!!(mobilePhoneIsOk&&userNameIsOk&&emailIsOk&&companyNameIsOk&&address4IsOk&&tel1IsOk&&tel2IsOk&&tel3IsOk&&contactIsOk)||(e.preventDefault(),submitBtnAvailability("enable"),!1)}function verifyRollback(){checkReg.mobilePhone.checkMobilePhone(),checkReg.userName.checkUserName(),checkReg.email.checkEmail(),checkReg.companyName.checkCompanyName(),checkReg.telphone.tel1.checkTel1(),checkReg.telphone.tel2.checkTel2(),checkReg.telphone.tel3.checkTel3(),checkReg.address.checkAddress(),checkReg.contact.checkContact()}function submitBtnAvailability(e){"disable"==e?($("#saveButtonUnclick").show(),$("#saveButton").hide()):($("#saveButtonUnclick").hide(),$("#saveButton").show())}var mobilePhoneIsOk=!1,userNameIsOk=!1,emailIsOk=!1,companyNameIsOk=!1,address4IsOk=!1,tel1IsOk=!1,tel2IsOk=!1,tel3IsOk=!0,contactIsOk=!1,checkReg={emailReg:/^(([a-zA-Z0-9]+\w*((\.\w+)|(-\w+))*[\.-]?[a-zA-Z0-9]+)|([a-zA-Z0-9]))\@[a-zA-Z0-9]+((\.|-)[a-zA-Z0-9]+)*\.[a-zA-Z0-9]+$/,mobilePhoneReg:/^1[3,4,5,6,7,8,9][0-9]{9}$/,numberReg:/^[0-9]*$/,nameReg:/^(\w|[\u4E00-\u9FA5]|\s)*$/,upperCaseReg:/[A-Z]/g,userNameReg:/^(\w|[\u4E00-\u9FA5])*$/,companNameReg:/^(\w|[\u4E00-\u9FA5])*$/,lang_zh:{3101:"4-20个字符，可由小写字母、中文、数字组成",3102:"用户名不能为空",3103:"该用户名已被使用，请更换其它用户名",3104:"最少4个字符，请输入您的用户名",3105:"最多只能为20个字符",3106:"用户名不能全由数字组成！",3107:"用户名不能有大写字母！",3108:"用户名只能是数字，小写字母和汉字",3131:"请填写单位执照上的名称，最长为30个汉字（60个字符）",3132:"姓名不能为空",3133:"公司名称最长只能为30个汉字（60个字符）",3134:"该公司名称已被注册",3141:"请选择并填写地址",3144:"地址最长只能为50个汉字（100个字符）",3151:"请输入邮箱",3152:"邮箱不能为空",3153:"邮箱格式不正确，请重新输入",3154:"该邮箱已被注册，请更换其它邮箱",3161:"请输入区号",3162:"电话不能为空",3163:"只能3-4位纯数字",3171:"请输入座机号",3172:"座机号不能为空",3173:"只能7-8位纯数字",3181:"请输入分机号,没有可不填写",3183:"只能是数字",3191:"2-30个字符，可有中文或英文组成",3192:"联系人姓名不能为空",3193:"联系人姓名只能为2-30个字符，不允许特殊符号",3201:"请输入手机号码",3202:"手机号不能为空",3203:"手机号格式不正确，请重新输入",3204:"此手机号已注册，请更换其它手机号",3241:"注册失败，请稍后重试。"},mobilePhone:{checkMobilePhoneFocus:function(){checkReg.tool.switchInputStyle("normal","mobilePhone","tipImgMobilePhone","tipInfoMobilePhone"),$("#tipInfoMobilePhone").html(checkReg.lang_zh[3201])},checkMobilePhone:function(){checkReg.tool.switchInputStyle("normal","mobilePhone","tipImgMobile","tipInfoMobilePhone"),mobilePhoneIsOk=!1;var e=!1,t=$.trim($("#mobilePhone").val());return""!=t&&(checkReg.mobilePhoneReg.test(t)?($.ajax({type:"POST",url:$("#contextPath").val()+"/commonapi/checkUser",dataType:"json",data:{key:t},async:!1,success:function(t){if(0==t)return checkReg.tool.switchInputStyle("error","mobilePhone","tipImgMobile","tipInfoMobilePhone"),$("#tipInfoMobilePhone").html(checkReg.lang_zh[3204]),e=!0,!1}}),1!=e&&(checkReg.tool.switchInputStyle("ok","mobilePhone","tipImgMobile","tipInfoMobilePhone"),mobilePhoneIsOk=!0,!0)):(checkReg.tool.switchInputStyle("error","mobilePhone","tipImgMobile","tipInfoMobilePhone"),$("#tipInfoMobilePhone").html(checkReg.lang_zh[3203]),!1))}},userName:{checkFocus:function(){checkReg.tool.switchInputStyle("normal","userName","tipImgUserName","tipUserName"),$("#tipInfoUserName").html(checkReg.lang_zh[3101])},checkKeypress:function(){var e=$.trim($("#userName").val());if(""==e)return!1;var t=checkReg.tool.VerifyCharLength(e,20);if(t&&"flag"in t&&!1===t.flag)return checkReg.tool.switchInputStyle("error","userName","tipImgUserName","tipInfoUserName"),$("#tipInfoUserName").text(checkReg.lang_zh[3105]),$("#userName").val(e.substr(0,t.charLen)),!1;checkReg.tool.switchInputStyle("normal","userName","tipImgUserName","tipInfoUserName")},checkUserName:function(){userNameIsOk=!1;var e=!1;checkReg.tool.switchInputStyle("normal","userName","tipImgUserName","tipInfoUserName");var t=$.trim($("#userName").val());if(""==t)return!1;var c=checkReg.userName.VerifyFormatUserName(t);return c&&"flag"in c&&!1===c.flag?(checkReg.tool.switchInputStyle("error","userName","tipImgUserName","tipInfoUserName"),$("#tipInfoUserName").text(c.errorInfo),!1):($.ajax({type:"POST",url:$("#contextPath").val()+"/commonapi/checkUser",dataType:"json",data:{key:t},async:!1,success:function(c){if(0==c)return checkReg.tool.switchInputStyle("error","userName","tipImgUserName","tipInfoUserName"),$("#tipInfoUserName").html(checkReg.lang_zh[3103].replace("{#userName#}",t)),e=!0,!1},error:function(){return!1}}),1!=e&&(checkReg.tool.switchInputStyle("ok","userName","tipImgUserName","tipInfoUserName"),userNameIsOk=!0,!0))},VerifyFormatUserName:function(e){var t="",c=!1,o={flag:c,errorInfo:""};return e&&""!=e&&(GetCharLength(e)<4?(t=checkReg.lang_zh[3104],c=!1):GetCharLength(e)>20?(t=checkReg.lang_zh[3105],c=!1):checkReg.numberReg.test(e)?(t=checkReg.lang_zh[3106],c=!1):checkReg.upperCaseReg.test(e)?(t=checkReg.lang_zh[3107],c=!1):e.match(checkReg.userNameReg)?c=!0:(t=checkReg.lang_zh[3108],c=!1),o={flag:c,errorInfo:t}),o}},email:{checkEmailFocus:function(){checkReg.tool.switchInputStyle("normal","email","tipImgEmail","tipInfoEmail"),$("#tipInfoEmail").html(checkReg.lang_zh[3151])},checkEmail:function(){emailIsOk=!1;var e=!1;checkReg.tool.switchInputStyle("normal","email","tipImgEmail","tipInfoEmail");var t=$.trim($("#email").val());return""==t?(emailIsOk=!0,!0):t.length>40||!checkReg.emailReg.test(t)?(checkReg.tool.switchInputStyle("error","email","tipImgEmail","tipInfoEmail"),$("#tipInfoEmail").html(checkReg.lang_zh[3153]),!1):/[ ]/.test(t)?(checkReg.tool.switchInputStyle("error","email","tipImgEmail","tipInfoEmail"),$("#tipInfoEmail").html(checkReg.lang_zh[3153]),!1):($.ajax({type:"POST",url:$("#contextPath").val()+"/commonapi/checkUser",dataType:"json",data:{key:t},async:!1,success:function(t){if(0==t)return checkReg.tool.switchInputStyle("error","email","tipImgEmail","tipInfoEmail"),$("#tipInfoEmail").html(checkReg.lang_zh[3154]),void(e=!0)}}),1!=e&&(checkReg.tool.switchInputStyle("ok","email","tipImgEmail","tipInfoEmail"),emailIsOk=!0,!0))}},companyName:{checkCompanyNameFocus:function(){checkReg.tool.switchInputStyle("normal","companyName","tipImgCompanyName","tipInfoCompanyName"),$("#tipInfoCompanyName").html(checkReg.lang_zh[3131])},checkKeypress:function(){var e=$.trim($("#companyName").val());if(""==e)return!1;var t=checkReg.tool.VerifyCharLength(e,60);if(t&&"flag"in t&&!1===t.flag)return checkReg.tool.switchInputStyle("error","companyName","tipImgCompanyName","tipInfoCompanyName"),$("#tipInfoCompanyName").text(checkReg.lang_zh[3133]),$("#companyName").val(e.substr(0,t.charLen)),!1;checkReg.tool.switchInputStyle("normal","companyName","tipImgCompanyName","tipInfoCompanyName")},checkCompanyName:function(){companyNameIsOk=!1;var e=!1;checkReg.tool.switchInputStyle("normal","companyName","tipImgCompanyName","tipInfoCompanyName");var t=$.trim($("#companyName").val());if(""==t)return!1;var c=checkReg.companyName.VerifyFormatCompanyName(t);return c&&"flag"in c&&!1===c.flag?(checkReg.tool.switchInputStyle("error","companyName","tipImgCompanyName","tipInfoCompanyName"),$("#tipInfoCompanyName").text(c.errorInfo),!1):($.ajax({type:"POST",url:$("#contextPath").val()+"/commonapi/checkUser",dataType:"json",data:{key:t},async:!1,success:function(t){if(0==t)return checkReg.tool.switchInputStyle("error","companyName","tipImgCompanyName","tipInfoCompanyName"),$("#tipInfoCompanyName").html(checkReg.lang_zh[3134]),e=!0,!1}}),1!=e&&(checkReg.tool.switchInputStyle("ok","companyName","tipImgCompanyName","tipInfoCompanyName"),companyNameIsOk=!0,!0))},VerifyFormatCompanyName:function(e){var t="",c=!1,o={flag:c,errorInfo:""};return e&&""!=e&&(GetCharLength(e)>60?(t=checkReg.lang_zh[3133],c=!1):c=!0,o={flag:c,errorInfo:t}),o}},address:{checkAddressFocus:function(){checkReg.tool.switchInputStyle("normal","address4","tipImgAddress4","tipInfoAddress4"),$("#tipInfoAddress4").html(checkReg.lang_zh[3141])},checkKeypress:function(){var e=$.trim($("#address4").val());if(""==e)return!0;var t=checkReg.tool.VerifyCharLength(e,100);if(t&&"flag"in t&&!1===t.flag)return checkReg.tool.switchInputStyle("error","address4","tipImgAddress4","tipInfoAddress4"),$("#tipInfoAddress4").text(checkReg.lang_zh[3144]),$("#address4").val(e.substr(0,t.charLen)),!1;checkReg.tool.switchInputStyle("normal","address4","tipImgAddress4","tipInfoAddress4")},checkAddress:function(){address4IsOk=!1,checkReg.tool.switchInputStyle("normal","address4","tipImgAddress4","tipInfoAddress4");var e=($("#tipInfoAddr"),$("#address4").val());return""==e?(address4IsOk=!0,!0):GetCharLength(e)>100?(checkReg.tool.switchInputStyle("error","address4","tipImgAddress4","tipInfoAddress4"),$("#tipInfoAddress4").html(checkReg.lang_zh[3144]),!1):checkReg.nameReg.test(e)?(address4IsOk=!0,checkReg.tool.switchInputStyle("ok","address4","tipImgAddress4","tipInfoAddress4"),!0):(checkReg.tool.switchInputStyle("error","address4","tipImgAddress4","tipInfoAddress4"),$("#tipInfoAddress4").html(checkReg.lang_zh[3144]),!1)}},telphone:{tel1:{checkTel1Focus:function(){checkReg.tool.switchInputStyle("normal","telphone1","tipImgTelphone","tipInfoTelphone"),$("#tipInfoTelphone").html(checkReg.lang_zh[3161])},checkTel1:function(){tel1IsOk=!1,checkReg.tool.switchInputStyle("normal","telphone1","tipImgTelphone","tipInfoTelphone");var e=$.trim($("#telphone1").val());if(""==e)return!1;var t=e.length;return!checkReg.numberReg.test(e)||3!=t&&4!=t?(checkReg.tool.switchInputStyle("error","telphone1","tipImgTelphone","tipInfoTelphone"),$("#tipInfoTelphone").html(checkReg.lang_zh[3163]),!1):(tel1IsOk=!0,tel1IsOk&&tel2IsOk&&tel3IsOk&&checkReg.tool.switchInputStyle("ok","telphone1","tipImgTelphone","tipInfoTelphone"),!0)}},tel2:{checkTel2Focus:function(){checkReg.tool.switchInputStyle("normal","telphone2","tipInfoTelphone","tipInfoTelphone"),$("#tipInfoTelphone").html(checkReg.lang_zh[3171])},checkTel2:function(){tel2IsOk=!1,checkReg.tool.switchInputStyle("normal","telphone2","tipImgTelphone","tipInfoTelphone");var e=$.trim($("#telphone2").val());if(""==e)return!1;var t=e.length;return!checkReg.numberReg.test(e)||7!=t&&8!=t?(checkReg.tool.switchInputStyle("error","telphone2","tipImgTelphone","tipInfoTelphone"),$("#tipInfoTelphone").html(checkReg.lang_zh[3173]),!1):(tel2IsOk=!0,tel1IsOk&&tel2IsOk&&tel3IsOk&&checkReg.tool.switchInputStyle("ok","telphone2","tipImgTelphone","tipInfoTelphone"),!0)}},tel3:{checkTel3Focus:function(){checkReg.tool.switchInputStyle("normal","telphone3","tipImgTelphone","tipInfoTelphone"),$("#tipInfoTelphone").html(checkReg.lang_zh[3181])},checkTel3:function(){tel3IsOk=!0,checkReg.tool.switchInputStyle("normal","telphone3","tipImgTelphone","tipInfoTelphone");var e=$.trim($("#telphone3").val());if(""==e)tel3IsOk=!0;else if(!checkReg.numberReg.test(e))return checkReg.tool.switchInputStyle("error","telphone3","tipImgTelphone","tipInfoTelphone"),$("#tipInfoTelphone").html(checkReg.lang_zh[3183]),tel3IsOk=!1,!1;return tel1IsOk&&tel2IsOk&&tel3IsOk&&checkReg.tool.switchInputStyle("ok","telphone3","tipImgTelphone","tipInfoTelphone"),!0}}},contact:{checkContactFocus:function(){checkReg.tool.switchInputStyle("normal","contact","tipImgContact","tipInfoContact"),$("#tipInfoContact").html(checkReg.lang_zh[3191])},checkKeypress:function(){var e=$.trim($("#contact").val());if(""==e)return!1;var t=checkReg.tool.VerifyCharLength(e,30);if(t&&"flag"in t&&!1===t.flag)return checkReg.tool.switchInputStyle("error","contact","tipImgContact","tipInfoContact"),$("#tipInfoContact").text(checkReg.lang_zh[3193]),$("#contact").val(e.substr(0,t.charLen)),!1;checkReg.tool.switchInputStyle("normal","contact","tipImgContact","tipInfoContact")},checkContact:function(){contactIsOk=!1,checkReg.tool.switchInputStyle("normal","contact","tipImgContact","tipInfoContact");var e=$.trim($("#contact").val());if(""==e)return!1;var t=GetCharLength(e);return t<2||t>32?(checkReg.tool.switchInputStyle("error","contact","tipImgContact","tipInfoContact"),$("#tipInfoContact").html(checkReg.lang_zh[3193]),!1):checkReg.nameReg.test(e)?(checkReg.tool.switchInputStyle("ok","contact","tipImgContact","tipInfoContact"),contactIsOk=!0,!0):(checkReg.tool.switchInputStyle("error","contact","tipImgContact","tipInfoContact"),$("#tipInfoContact").html(checkReg.lang_zh[3193]),!1)}},tool:{switchInputStyle:function(e,t,c,o){"normal"==e?($("#"+t).removeClass("was-validated is-invalid is-valid"),$("#"+o).removeClass("invalid-feedback").addClass("valid-feedback").html("").css({display:"block"})):"ok"==e?($("#"+t).addClass("was-validated is-valid").removeClass("is-invalid"),$("#"+o).removeClass("invalid-feedback").addClass("valid-feedback").css({display:"block"})):"error"==e&&($("#"+t).addClass("was-validated is-invalid").removeClass("is-valid"),$("#"+o).addClass("invalid-feedback").addClass("valid-feedback").css({display:"block"}))},isFunc:function(e){return"function"==typeof e},VerifyCharLength:function(e,t){var c=t,o=!0,n={flag:o,charLen:c};if(e&&""!=e){if(GetCharLength(e)>t){var a=e.length;o=!1;for(var l=0,h=0;h<a;h++){if((l+=GetCharLength(e[h]))==t){c=h+1;break}if(l>t){c=h;break}}}n={flag:o,charLen:c}}return n}}};$(function(){verifyRollback(),$("#mobilePhone").bind("focus",function(){checkReg.mobilePhone.checkMobilePhoneFocus()}),$("#mobilePhone").blur(function(){checkReg.mobilePhone.checkMobilePhone()}),$("#userName").bind("focus",function(){checkReg.userName.checkFocus()}),$("#userName").on("keyup",function(){checkReg.userName.checkKeypress()}),$("#userName").blur(function(){checkReg.userName.checkUserName()}),$("#email").bind("focus",function(){checkReg.email.checkEmailFocus()}),$("#email").blur(function(){checkReg.email.checkEmail()}),$("#companyName").bind("focus",function(){checkReg.companyName.checkCompanyNameFocus()}),$("#companyName").blur(function(){checkReg.companyName.checkCompanyName()}),$("#companyName").on("keyup",function(){checkReg.companyName.checkKeypress()}),$("#telphone1").bind("focus",function(){checkReg.telphone.tel1.checkTel1Focus()}),$("#telphone1").blur(function(){checkReg.telphone.tel1.checkTel1()}),$("#telphone2").bind("focus",function(){checkReg.telphone.tel2.checkTel2Focus()}),$("#telphone2").blur(function(){checkReg.telphone.tel2.checkTel2()}),$("#telphone3").bind("focus",function(){checkReg.telphone.tel3.checkTel3Focus()}),$("#telphone3").blur(function(){checkReg.telphone.tel3.checkTel3()}),$("#address4").on("focus",function(){checkReg.address.checkAddressFocus()}),$("#address4").on("keyup",function(){checkReg.address.checkKeypress()}),$("#address4").on("blur",function(){checkReg.address.checkAddress()}),$("#contact").bind("focus",function(){checkReg.contact.checkContactFocus()}),$("#contact").on("keyup",function(){checkReg.contact.checkKeypress()}),$("#contact").blur(function(){checkReg.contact.checkContact()}),$("form").submit(function(e){submitBtnAvailability("disable"),setTimeout(check_register(e),50)})});